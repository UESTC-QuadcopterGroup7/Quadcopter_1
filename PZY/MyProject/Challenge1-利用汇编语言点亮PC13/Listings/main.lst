


ARM Macro Assembler    Page 1 


    1 00000000         ;=======================================================
                       =======================
    2 00000000         ; STM32F103C8 LEDæ§åˆ¶æ±‡ç¼–ç¨‹åº
    3 00000000         ; åŠŸèƒ½ï¼šPC13å¼•è„šçš„LEDå‘¨æœŸæ€§é—ªçƒï¼ˆ2ç§’é—´éš”ï
                       ¼‰
    4 00000000         ;=======================================================
                       =======================
    5 00000000         
    6 00000000         ;=======================================================
                       =======================
    7 00000000         ; å¯„å­˜å™¨åœ°å€å®šä¹‰
    8 00000000         ;=======================================================
                       =======================
    9 00000000 40021000 
                       RCC_BASE
                               EQU              0x40021000  ; RCCå¤–è®¾çš„åŸºåœ
                                                            °å€
   10 00000000 40021018 
                       RCC_APB2ENR
                               EQU              (RCC_BASE + 0x18) ; APB2å¤–è®¾æ
                                                            —¶é’Ÿä½¿èƒ½å¯„å­˜å™
                                                            ¨åœ°å€
   11 00000000 40011000 
                       GPIOC_BASE
                               EQU              0x40011000  ; GPIOCå¤–è®¾çš„åŸº
                                                            åœ°å€
   12 00000000 40011004 
                       GPIOC_CRH
                               EQU              (GPIOC_BASE + 0x04) ; ç«¯å£é…
                                                            ç½®é«˜å¯„å­˜å™¨åœ°å
                                                            €
   13 00000000 4001100C 
                       GPIOC_ODR
                               EQU              (GPIOC_BASE + 0x0C) ; ç«¯å£è¾“
                                                            å‡ºæ•°æ®å¯„å­˜å™¨
   14 00000000         ;=======================================================
                       =======================
   15 00000000         ; ä½çŠ¶æ€å®šä¹‰
   16 00000000         ;=======================================================
                       =======================
   17 00000000 00000010 
                       GPIOC_EN
                               EQU              0x00000010
   18 00000000 00300000 
                       LED_CONFIG
                               EQU              0x00300000
   19 00000000 00000000 
                       LED_ON  EQU              0x00000000  ; PC13è¾“å‡ºä½ç”µå
                                                            ¹³ (LEDç‚¹äº®)
   20 00000000 00002000 
                       LED_OFF EQU              0x00002000  ; PC13è¾“å‡ºé«˜ç”µå
                                                            ¹³ (LEDç†„ç­)
   21 00000000 000007D0 
                       DELAY_MS
                               EQU              2000        ; å»¶æ—¶æ¯«ç§’æ•°ï¼
                                                            Œä¿®æ”¹ä¸º2000msï¼ˆ
                                                            2ç§’ï¼‰
   22 00000000         
   23 00000000         ;=======================================================



ARM Macro Assembler    Page 2 


                       =======================
   24 00000000         ; ä»£ç æ®µå®šä¹‰
   25 00000000         ;=======================================================
                       =======================
   26 00000000                 AREA             |.text|, CODE, READONLY
   27 00000000                 THUMB                        ; ä½¿ç”¨ThumbæŒ‡ä»¤
                                                            é›†
   28 00000000                 REQUIRE8                     ; è¦æ±‚8å­—èŠ‚å¯¹é
                                                            ½
   29 00000000                 PRESERVE8                    ; ä¿æŒ8å­—èŠ‚å¯¹é
                                                            ½
   30 00000000         
   31 00000000                 EXPORT           __main      ; å¯¼å‡ºmainå‡½æ•°
   32 00000000                 ENTRY                        ; ç¨‹åºå…¥å£ç‚¹
   33 00000000         
   34 00000000         ;=======================================================
                       =======================
   35 00000000         ; ä¸»å‡½æ•° - LEDé—ªçƒæ§åˆ¶
   36 00000000         ;=======================================================
                       =======================
   37 00000000         __main
   38 00000000         ;-------------------------------------------------------
                       -------
   39 00000000         ; æ­¥éª¤1: å¼€å¯GPIOCæ—¶é’Ÿ
   40 00000000         ;-------------------------------------------------------
                       -------
   41 00000000 4810            LDR              r0, =RCC_APB2ENR ; åŠ è½½RCC_AP
                                                            B2ENRå¯„å­˜å™¨åœ°å
                                                            €
   42 00000002 F04F 0110       MOV              r1, #GPIOC_EN ; è®¾ç½®ä½4ï¼Œä½
                                                            ¿èƒ½GPIOCæ—¶é’Ÿ
   43 00000006 6001            STR              r1, [r0]    ; å†™å›å¯„å­˜å™¨
   44 00000008         
   45 00000008         ;-------------------------------------------------------
                       -------
   46 00000008         ; æ­¥éª¤2: é…ç½®PC13ä¸ºæ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼Œ50MHz
   47 00000008         ;-------------------------------------------------------
                       -------
   48 00000008 480F            LDR              R0, =GPIOC_CRH ; åŠ è½½GPIOC_CR
                                                            Hå¯„å­˜å™¨åœ°å€ 
   49 0000000A F44F 1140       MOV              R1, #LED_CONFIG ; PC13é…ç½®ä¸º
                                                            æ¨æŒ½è¾“å‡ºï¼Œ50MH
                                                            z
   50 0000000E 6001            STR              R1, [R0]    ; å†™å›å¯„å­˜å™¨
   51 00000010         
   52 00000010         ;=======================================================
                       =======================
   53 00000010         ; ä¸»å¾ªç¯ - LEDäº¤æ›¿äº®ç­
   54 00000010         ;=======================================================
                       =======================
   55 00000010         main_loop
   56 00000010         ; ç‚¹äº®LED
   57 00000010 480E            LDR              R0, =GPIOC_ODR
   58 00000012 F04F 0100       MOV              R1, #LED_ON
   59 00000016 6001            STR              R1, [R0]
   60 00000018         
   61 00000018         ; å»¶æ—¶2ç§’
   62 00000018 F44F 60FA       LDR              R0, =DELAY_MS
   63 0000001C F000 F809       BL               delay_ms    ; è°ƒç”¨æ¯«ç§’çº§å»



ARM Macro Assembler    Page 3 


                                                            ¶æ—¶å‡½æ•°
   64 00000020         
   65 00000020         ; ç†„ç­LED
   66 00000020 480A            LDR              R0, =GPIOC_ODR
   67 00000022 F44F 5100       MOV              R1, #LED_OFF
   68 00000026 6001            STR              R1, [R0]
   69 00000028         
   70 00000028         ; å»¶æ—¶2ç§’
   71 00000028 F44F 60FA       LDR              R0, =DELAY_MS
   72 0000002C F000 F801       BL               delay_ms    ; è°ƒç”¨æ¯«ç§’çº§å»
                                                            ¶æ—¶å‡½æ•°
   73 00000030         
   74 00000030 E7EE            B                main_loop   ; å¾ªç¯æ‰§è¡Œ
   75 00000032         
   76 00000032         ;=======================================================
                       =======================
   77 00000032         ; æ¯«ç§’çº§å»¶æ—¶å‡½æ•°
   78 00000032         ; è¾“å…¥: R0 = å»¶æ—¶æ¯«ç§’æ•°
   79 00000032         ; å‡è®¾ç³»ç»Ÿæ—¶é’Ÿä¸º8MHz
   80 00000032         ;=======================================================
                       =======================
   81 00000032         delay_ms
   82 00000032 B503            PUSH             {R0, R1, LR} ; ä¿å­˜å¯„å­˜å™¨
   83 00000034 F44F 5100 
                       delay_ms_loop1
                               MOV              R1, #0x2000 ; å†…éƒ¨å¾ªç¯è®¡æ•
                                                            °(çº¦1ms)
   84 00000038 1E49    delay_ms_loop2
                               SUBS             R1, R1, #1  ; R1 = R1 - 1
   85 0000003A D1FD            BNE              delay_ms_loop2 ; R1ä¸ä¸º0åˆ™ç»
                                                            §ç»­å¾ªç¯
   86 0000003C         
   87 0000003C 1E40            SUBS             R0, R0, #1  ; æ€»å»¶æ—¶å‡1ms
   88 0000003E D1F9            BNE              delay_ms_loop1 ; æœªè¾¾åˆ°æŒ‡å®
                                                            šå»¶æ—¶åˆ™ç»§ç»­
   89 00000040         
   90 00000040 BD03            POP              {R0, R1, PC} ; æ¢å¤å¯„å­˜å™¨å
                                                            ¹¶è¿”å›
   91 00000042         
   92 00000042 00 00           ALIGN                        ; ç¡®ä¿ä»£ç æ®µå¯
                                                            ¹é½
   93 00000044                 END
              40021018 
              40011004 
              4001100C 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\main.d -o.\objects\main.o -I.\RTE\_User -IE:\CS\Keil5\AR
M\PACK\Keil\STM32F1xx_DFP\2.2.0\Device\Include -IE:\CS\Keil5\ARM\CMSIS\Include 
--predefine="__UVISION_VERSION SETA 524" --predefine="STM32F10X_MD SETA 1" --li
st=.\listings\main.lst User\main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 26 in file User\main.s
   Uses
      None
Comment: .text unused
__main 00000000

Symbol: __main
   Definitions
      At line 37 in file User\main.s
   Uses
      At line 31 in file User\main.s
Comment: __main used once
delay_ms 00000032

Symbol: delay_ms
   Definitions
      At line 81 in file User\main.s
   Uses
      At line 63 in file User\main.s
      At line 72 in file User\main.s

delay_ms_loop1 00000034

Symbol: delay_ms_loop1
   Definitions
      At line 83 in file User\main.s
   Uses
      At line 88 in file User\main.s
Comment: delay_ms_loop1 used once
delay_ms_loop2 00000038

Symbol: delay_ms_loop2
   Definitions
      At line 84 in file User\main.s
   Uses
      At line 85 in file User\main.s
Comment: delay_ms_loop2 used once
main_loop 00000010

Symbol: main_loop
   Definitions
      At line 55 in file User\main.s
   Uses
      At line 74 in file User\main.s
Comment: main_loop used once
6 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DELAY_MS 000007D0

Symbol: DELAY_MS
   Definitions
      At line 21 in file User\main.s
   Uses
      At line 62 in file User\main.s
      At line 71 in file User\main.s

GPIOC_BASE 40011000

Symbol: GPIOC_BASE
   Definitions
      At line 11 in file User\main.s
   Uses
      At line 12 in file User\main.s
      At line 13 in file User\main.s

GPIOC_CRH 40011004

Symbol: GPIOC_CRH
   Definitions
      At line 12 in file User\main.s
   Uses
      At line 48 in file User\main.s
Comment: GPIOC_CRH used once
GPIOC_EN 00000010

Symbol: GPIOC_EN
   Definitions
      At line 17 in file User\main.s
   Uses
      At line 42 in file User\main.s
Comment: GPIOC_EN used once
GPIOC_ODR 4001100C

Symbol: GPIOC_ODR
   Definitions
      At line 13 in file User\main.s
   Uses
      At line 57 in file User\main.s
      At line 66 in file User\main.s

LED_CONFIG 00300000

Symbol: LED_CONFIG
   Definitions
      At line 18 in file User\main.s
   Uses
      At line 49 in file User\main.s
Comment: LED_CONFIG used once
LED_OFF 00002000

Symbol: LED_OFF
   Definitions
      At line 20 in file User\main.s
   Uses
      At line 67 in file User\main.s
Comment: LED_OFF used once



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

LED_ON 00000000

Symbol: LED_ON
   Definitions
      At line 19 in file User\main.s
   Uses
      At line 58 in file User\main.s
Comment: LED_ON used once
RCC_APB2ENR 40021018

Symbol: RCC_APB2ENR
   Definitions
      At line 10 in file User\main.s
   Uses
      At line 41 in file User\main.s
Comment: RCC_APB2ENR used once
RCC_BASE 40021000

Symbol: RCC_BASE
   Definitions
      At line 9 in file User\main.s
   Uses
      At line 10 in file User\main.s
Comment: RCC_BASE used once
10 symbols
350 symbols in table
